<div class="container mt-5">
  <button (click)="goBack()">
    <i class="material-icons">arrow_back</i>
  </button>
  <!--Todo: Probably replace with better solution to update edited text-->
  <h2 #head contenteditable="true" (blur)="title=head.textContent">{{title}}</h2>
  <div class="row">
    <div class="col-12 col-lg-5 col-md-5">
      <mat-card>
        <mat-card-title>Übersicht</mat-card-title>
        <mat-card-content>
          <p>Übersicht über erstellte Aufgaben.</p>
        </mat-card-content>
      </mat-card>
    </div>
    <div class="col-12 col-lg-6 col-md-6">
      <mat-card>
        <mat-card-title>Erstellen</mat-card-title>
        <mat-card-content>
          <div *ngIf="sheet.exercises.length > 0">
            <ol>
              <li *ngFor="let exercises of sheet.exercises">
                <!--Todo: Test if two-way-binding works this way-->
                <mat-form-field>
                  <input matInput type="text" [ngModel]="exercises.name" placeholder="Aufgabentitel">
                </mat-form-field>
                <div>
                  <mat-grid-list [cols]="2" rowHeight="70px">
                    <mat-grid-tile>
                      <label>Frage:</label>
                    </mat-grid-tile>
                    <mat-grid-tile>
                      <mat-form-field>
                        <textarea matInput [ngModel]="exercises.description" placeholder="Aufgabenbeschreibung"></textarea>
                      </mat-form-field>
                    </mat-grid-tile>
                  </mat-grid-list>
                  <div>
                    <div *ngIf="exercises.tasks.length > 0">
                      <ol style="list-style-type: lower-alpha">
                        <li *ngFor="let tasks of exercises.tasks">
                          <mat-form-field>
                            <input matInput type="text"  [(ngModel)]="tasks.question" placeholder="Titel Teilaufgabe">
                          </mat-form-field>
                          <div>
                            <mat-grid-list [cols]="2" rowHeight="70px">
                              <mat-grid-tile>
                                <label>Antworttyp:</label>
                              </mat-grid-tile>
                              <mat-grid-tile>
                                <mat-form-field>
                                  <mat-select placeholder="Typ wählen" [(ngModel)]="tasks.solution.type">
                                    <mat-option value="freetext">Freitext</mat-option>
                                    <mat-option value="number">Zahl</mat-option>
                                    <mat-option value="range">Zahlenbereich</mat-option>
                                    <mat-option value="regex">Regex</mat-option>
                                    <mat-option value="none">Keine</mat-option>
                                  </mat-select>
                                </mat-form-field>
                              </mat-grid-tile>
                              <div *ngIf="tasks.solution.type">
                                <mat-grid-tile>
                                  <label>Antworten:</label>
                                </mat-grid-tile>
                                <mat-grid-tile>
                                  <div *ngIf="tasks.solution.type == 'freetext'">
                                    <mat-form-field>
                                      <input matInput type="text" placeholder="Freitext..." [ngModel]="tasks.solution.regex">
                                    </mat-form-field>
                                  </div>
                                  <div *ngIf="tasks.solution.type == 'number'">
                                    <mat-form-field>
                                      <input matInput type="number" placeholder="Zahl..." [ngModel]="tasks.solution.number">
                                    </mat-form-field>
                                  </div>
                                  <div *ngIf="tasks.solution.type == 'range'">
                                    <mat-form-field>
                                      <input matInput type="text" placeholder="Von,Bis" [ngModel]="tasks.solution.range">
                                    </mat-form-field>
                                  </div>
                                  <div *ngIf="tasks.solution.type == 'regex'">
                                    <mat-form-field>
                                      <input matInput type="text" placeholder="Regex..." [ngModel]="answers">
                                    </mat-form-field>
                                  </div>
                                </mat-grid-tile>
                              </div>
                              <mat-grid-tile>
                                <label>Punkte:</label>
                              </mat-grid-tile>
                              <mat-grid-tile>
                                <mat-form-field>
                                  <input matInput type="number" [ngModel]="tasks.points">
                                </mat-form-field>
                              </mat-grid-tile>
                              <mat-grid-tile>
                              <label>Bearbeitungshinweise:</label>
                              </mat-grid-tile>
                              <mat-grid-tile>
                                <mat-form-field>
                                  <textarea matInput [(ngModel)]="tasks.choices" ></textarea>
                                </mat-form-field>
                              </mat-grid-tile>
                            </mat-grid-list>
                          </div>
                        </li>
                      </ol>
                    </div>
                  </div>
                  <button mat-icon-button  style="float: right" (click)="addTask(exercises.order)">
                    <mat-icon color="secondary">add</mat-icon>
                  </button>
                </div>
                <mat-divider></mat-divider>
                <br>
              </li>
            </ol>
          </div>
          <button mat-icon-button (click)="addExercise()">
            <mat-icon color="secondary">add</mat-icon>
          </button>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>



